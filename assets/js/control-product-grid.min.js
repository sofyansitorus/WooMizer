!function(t){"use strict";var i={_defaults:{rows:5,cols:4,wrapper:".woomizer-product-grid-wrap",container:".woomizer-product-grid-picker",input:".woomizer-product-grid-input"},init:function(i){this.settings=t.extend({},this._defaults,i),this._bindInputs(),this._bindInputsOutFocus(),this._bindSquares()},_bindInputs:function(){var i=this;t(i.settings.input).focus(function(){var s=0,n=0,r=t(this).val().split("x");2===r.length&&(s=parseInt(r[0]),n=parseInt(r[1])),t(i.settings.container).remove(),t(this).next(i.settings.container).length||i._renderPicker(t(this),s,n)})},_bindInputsOutFocus:function(){var i=this;t(document).click(function(s){t(s.target).closest(i.settings.wrapper).length||t(i.settings.input).next(i.settings.container).remove()})},_renderPicker:function(i,s,n){for(var r=this,e='<div class="'+r.settings.container.replace(".","")+'">',c=0;c<r.settings.rows;c++){e+='<div class="row">';for(var o=0;o<r.settings.cols;o++)e+=c<n&&o<s?'<div class="product-grid-square highlight"><div class="inner"></div></div>':'<div class="product-grid-square"><div class="inner"></div></div>';e+="</div>"}var d=t(e+="</div>").height(24*r.settings.rows).insertAfter(i);d.find(".row").css({height:"calc(100%/"+r.settings.rows+")"}),d.find(".product-grid-square").css({width:"calc(100%/"+r.settings.cols+")"})},_bindSquares:function(){var i=this;t(document).on("mouseover",".product-grid-square",function(){var s=t(this),n=s.index()+1,r=s.parent().index()+1;t(".product-grid-square").removeClass("highlight"),t(".row:nth-child(-n+"+r+") .product-grid-square:nth-child(-n+"+n+")").addClass("highlight"),s.bind("click",function(){s.closest(".woomizer-product-grid-wrap").find(i.settings.input).val(n+"x"+r).trigger("change"),s.closest(i.settings.container).hide().remove()})})}};t(document).ready(function(){i.init()})}(jQuery);